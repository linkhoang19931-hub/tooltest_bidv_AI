<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tool Test AI BIDV + T·∫£i PDF HƒêQT</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/942/942748.png">
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f8fafc;
      color: #333;
      margin: 0;
      padding: 0;
    }

    header {
      background: linear-gradient(90deg, #0b5394, #073763);
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 22px;
      font-weight: 600;
    }

    .container {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      padding: 30px;
    }

    .panel {
      flex: 1;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      padding: 20px;
      min-height: 400px;
    }

    h2 {
      color: #0b5394;
      border-bottom: 2px solid #0b5394;
      padding-bottom: 8px;
      margin-bottom: 15px;
    }

    /* ====== Tool test AI (gi·ªØ nguy√™n style) ====== */
    #tool-panel {
      flex: 2;
    }

    /* ====== PDF panel ====== */
    #pdf-section select, #pdf-section button {
      padding: 8px 12px;
      font-size: 14px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-right: 8px;
      margin-bottom: 10px;
    }

    #pdf-section button {
      background: #0b5394;
      color: white;
      cursor: pointer;
      font-weight: 500;
    }

    #pdf-section button:hover {
      background: #073763;
    }

    .log-box {
      margin-top: 15px;
      padding: 10px;
      height: 150px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: #f8f9fa;
      overflow-y: auto;
      white-space: pre-wrap;
      font-size: 13px;
    }

    footer {
      text-align: center;
      padding: 10px;
      background: #0b5394;
      color: white;
      font-size: 13px;
    }

    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <header>üß† TOOL TEST AI BIDV + üìÇ T·∫¢I PDF HƒêQT</header>

  <div class="container">
    <!-- ================================================= -->
    <!-- üîπ C·ªòT 1: TOOL TEST AI BIDV -->
    <!-- ================================================= -->
    <div id="tool-panel" class="panel">
      <h2>ü§ñ Tool Test AI BIDV</h2>

      <p><i>(Gi·ªØ nguy√™n khu v·ª±c hi·ªán t·∫°i c·ªßa b·∫°n, b·∫£ng test-case, input file Excel, c√°c n√∫t ‚ÄúRun‚Äù, ‚ÄúSummary‚Äù, ‚ÄúExport CSV‚Äù...)</i></p>

      <!-- 
        üî∏ B·∫°n c√≥ th·ªÉ copy to√†n b·ªô HTML/Javascript c·ªßa b·∫£ng c≈© v√†o ƒë√¢y
        v√≠ d·ª•: <input type="file">, <select bot>, <button run>, v.v.
      -->
    </div>

    <!-- ================================================= -->
    <!-- üîπ C·ªòT 2: T·∫¢I PDF HƒêQT -->
    <!-- ================================================= -->
    <div id="pdf-section" class="panel">
      <h2>üìÇ T·∫£i PDF HƒêQT</h2>

      <label for="folder">Ch·ªçn folder:</label><br>
      <select id="folder">
        <option value="">-- ch·ªçn folder --</option>
        <option value="quanlyruiro">04_Qu·∫£n l√Ω r·ªßi ro</option>
        <option value="tuanthuvaphapche">05_Tu√¢n th·ªß & Ph√°p ch·∫ø</option>
        <option value="hoatdonghdqt">01_Ho·∫°t ƒë·ªông HƒêQT</option>
        <option value="chienluocvathitruong">02_Chi·∫øn l∆∞·ª£c & Th·ªã tr∆∞·ªùng</option>
        <option value="tinhtonghop">03_T·ªïng h·ª£p & Gi√°m s√°t</option>
      </select>

      <br>
      <button id="btn-download" onclick="downloadPDFs()">üì• T·∫£i PDF</button>

      <div id="log" class="log-box"></div>
    </div>
  </div>

  <footer>
    ¬© BIDV Internal Tool | Designed by LinhHM3 | v1.0
  </footer>

  <script>
    async function downloadPDFs() {
      const folder = document.getElementById("folder").value;
      const log = document.getElementById("log");
      log.textContent = "‚è≥ ƒêang x·ª≠ l√Ω...";

      if (!folder) {
        log.textContent = "‚ö†Ô∏è Vui l√≤ng ch·ªçn folder c·∫ßn t·∫£i.";
        return;
      }

      try {
        const form = new FormData();
        form.append("folder", folder);

        // ‚öôÔ∏è ch·ªânh l·∫°i n·∫øu Flask backend ch·∫°y server kh√°c
        const response = await fetch("http://127.0.0.1:5000/download_pdfs", {
          method: "POST",
          body: form
        });

        if (!response.ok) {
          const data = await response.json();
          log.textContent = "‚ùå L·ªói: " + (data.error || response.statusText);
          return;
        }

        const blob = await response.blob();
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = folder + ".zip";
        document.body.appendChild(a);
        a.click();
        a.remove();
        window.URL.revokeObjectURL(url);

        log.textContent = "‚úÖ ƒê√£ t·∫£i xong file " + folder + ".zip";
      } catch (err) {
        log.textContent = "‚ùå L·ªói: " + err.message;
      }
    }
  </script>
</body>
</html>
